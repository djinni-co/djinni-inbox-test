{% extends "base.html" %}

{% block content %}
	<div class="container pt-3">
		<h1 class="mb-3">Inbox</h1>

        <table class="mb-3 table">
            <colgroup>
                <col span="1" style="min-width: 15em">
                <col span="1" style="width: 100%">
                <col span="1" style="width: min-content">
            </colgroup>

            <tbody>
                <tr>
                    <td>
                        <form href="#" method="get">
                            <select name="job-filter" class="form-select form-select-sm"
                                style="max-width: 20rem">

                                <option value="-1" checked>All</option>

                                {% for j in jobs %}
                                    <option value="{{ j.id }}">
                                        {{ '#%s: %s' % (j.id, j.position) }}
                                    </option>
                                {% endfor %}
                            </select>
                        </form>
                    </td>

                    <td>
                        <input type="search" placeholder="Search in Messages (NIY)"
                            style="width: 100%">
                    </td>

                    <td>
                        <form action="" method="get" style="display: inline">
                            <select name="{{ const.http.param.SORTING }}"
                                class="form-select form-select-sm"
                                style="float: right; width: min-content">

                                {% for so in sorting_options %}
                                    <option value="{{ so.id }}">{{ so.text }}</option>
                                {% endfor %}

                                <script>
                                /* the last item MUST be "Advanced Sorting" and it has special meaning */
                                el = document.currentScript.previousElementSibling;
                                $(el).on('click', function (ev) {
                                    ev.preventDefault();
                                    ev.target.classList.toggle('active');
                                    $('#adv-scoring-tool').toggle('hidden');
                                });
                                </script>
                            </select>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="mb-3" style="display: block" id="adv-scoring-tool">
            {% include 'inbox/mixin/advanced-scoring-tool.jinja' %}
        </div>

        <div id="chat-list">
            {% include 'inbox/mixin/chat-list.jinja' %}
        </div>

        <span id="spinner" class="htmx-indicator">
            <img src="{{ static('img/spinner-mod.gif') }}"
                style="height: 2em" />
        </span>
	</div>
{% endblock content %}
